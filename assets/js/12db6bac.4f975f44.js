"use strict";(self.webpackChunkalto_docs=self.webpackChunkalto_docs||[]).push([[560],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>f});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=a.createContext({}),s=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=s(e.components);return a.createElement(u.Provider,{value:n},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(t),d=r,f=m["".concat(u,".").concat(d)]||m[d]||p[d]||o;return t?a.createElement(f,i(i({ref:n},c),{},{components:t})):a.createElement(f,i({ref:n},c))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var u in n)hasOwnProperty.call(n,u)&&(l[u]=n[u]);l.originalType=e,l[m]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(7294),r=t(6010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:n,hidden:t,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:t},n)}},4866:(e,n,t)=>{t.d(n,{Z:()=>N});var a=t(7462),r=t(7294),o=t(6010),i=t(2466),l=t(6550),u=t(1980),s=t(7392),c=t(12);function m(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??m(t);return function(e){const n=(0,s.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function d(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.k6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,u._X)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=p(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!d({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[u,s]=f({queryString:t,groupId:a}),[m,v]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,c.Nk)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),b=(()=>{const e=u??m;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{b&&l(b)}),[b]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),s(e),v(e)}),[s,v,o]),tabValues:o}}var b=t(2389);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:n,block:t,selectedValue:l,selectValue:u,tabValues:s}=e;const c=[],{blockElementScrollPositionUntilNextRender:m}=(0,i.o5)(),p=e=>{const n=e.currentTarget,t=c.indexOf(n),a=s[t].value;a!==l&&(m(n),u(a))},d=e=>{let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},n)},s.map((e=>{let{value:n,label:t,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:e=>c.push(e),onKeyDown:d,onClick:p},i,{className:(0,o.Z)("tabs__item",h.tabItem,i?.className,{"tabs__item--active":l===n})}),t??n)})))}function g(e){let{lazy:n,children:t,selectedValue:a}=e;if(t=Array.isArray(t)?t:[t],n){const e=t.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},t.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function k(e){const n=v(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",h.tabList)},r.createElement(y,(0,a.Z)({},e,n)),r.createElement(g,(0,a.Z)({},e,n)))}function N(e){const n=(0,b.Z)();return r.createElement(k,(0,a.Z)({key:String(n)},e))}},1766:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>u,default:()=>f,frontMatter:()=>l,metadata:()=>s,toc:()=>m});var a=t(7462),r=(t(7294),t(3905)),o=t(4866),i=t(5162);const l={},u="Environments",s={unversionedId:"tutorial-basics/environments",id:"tutorial-basics/environments",title:"Environments",description:"What is an Environment?",source:"@site/docs/tutorial-basics/environments.mdx",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/environments",permalink:"/alto/docs/tutorial-basics/environments",draft:!1,editUrl:"https://github.com/z3z1ma/alto/tree/main/docs/docs/tutorial-basics/environments.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Example Configuration",permalink:"/alto/docs/tutorial-basics/example-configuration"},next:{title:"Secret Management",permalink:"/alto/docs/tutorial-basics/secret-management"}},c={},m=[{value:"What is an Environment?",id:"what-is-an-environment",level:2},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"The <code>ALTO_ENV</code> Environment Variable",id:"the-alto_env-environment-variable",level:2}],p={toc:m},d="wrapper";function f(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"environments"},"Environments"),(0,r.kt)("h2",{id:"what-is-an-environment"},"What is an Environment?"),(0,r.kt)("p",null,"Alto is designed to be used in a variety of environments. It is not uncommon to have a development environment, a staging environment, and a production environment. Alto allows you to define these environments in your configuration file."),(0,r.kt)("h2",{id:"environment-configuration"},"Environment Configuration"),(0,r.kt)("p",null,"In order to define an environment, you must add a section to your ",(0,r.kt)("inlineCode",{parentName:"p"},"alto.toml")," file. The section name must be the name of the environment. Here is an example of a configuration file with 3 environments:"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"toml",label:"TOML",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="alto.toml"',title:'"alto.toml"'},'[default]\n# base environment\nproject_name = "my-project"\n\n# environnment 1\n[dev]\n\n# environnment 2\n[github-actions]\n\n# environnment 3\n[prod]\n'))),(0,r.kt)(i.Z,{value:"yaml",label:"YAML",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="alto.yaml"',title:'"alto.yaml"'},"# base environment\ndefault:\n  project_name: my-project\n\n# environnment 1\ndev: {}\n\n# environnment 2\ngithub-actions: {}\n\n# environnment 3\nprod: {}\n"))),(0,r.kt)(i.Z,{value:"json",label:"JSON",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="alto.json"',title:'"alto.json"'},'{\n  "default": {\n    "project_name": "my-project"\n  },\n  "dev": {},\n  "github-actions": {},\n  "prod": {}\n}\n')))),(0,r.kt)("p",null,"The 3 environments defined in this file are ",(0,r.kt)("inlineCode",{parentName:"p"},"dev"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"github-actions"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"prod"),". Alto will use the ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," environment as a base for all environments. This means that any configuration defined in the ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," environment will be the base on top of which another environment can optionally be layered."),(0,r.kt)("admonition",{title:"Note",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The configuration structure is the same for all environments. You can often copy and paste configuration from one environment to another, slim it down, and only change the values that need to be changed.")),(0,r.kt)("h2",{id:"the-alto_env-environment-variable"},"The ",(0,r.kt)("inlineCode",{parentName:"h2"},"ALTO_ENV")," Environment Variable"),(0,r.kt)("p",null,"Alto uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTO_ENV")," environment variable to determine which environment to use. Consider it the master control switch. If the ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTO_ENV")," environment variable is not set, Alto will use the ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," environment alone. The ",(0,r.kt)("inlineCode",{parentName:"p"},"ALTO_ENV")," environment variable can be set in a number of ways. Here are the most common ways in order of precedence:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Via prefixing an ",(0,r.kt)("inlineCode",{parentName:"li"},"alto")," command",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"ALTO_ENV={env} alto ...")))),(0,r.kt)("li",{parentName:"ol"},"In your shell environment",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"export ALTO_ENV={env}")))),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("inlineCode",{parentName:"li"},".env")," file in the root of your project",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"ALTO_ENV={env}"))))),(0,r.kt)("p",null,"As you can see this follows 12-factor app principles. Alto itself leverages Dynaconf to manage configuration so we will regularly refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.dynaconf.com/"},"Dynaconf documentation")," for more information."))}f.isMDXComponent=!0}}]);