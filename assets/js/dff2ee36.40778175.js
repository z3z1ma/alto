"use strict";(self.webpackChunkalto_docs=self.webpackChunkalto_docs||[]).push([[863],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||a;return n?o.createElement(h,l(l({ref:t},u),{},{components:n})):o.createElement(h,l({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4490:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var o=n(7462),r=(n(7294),n(3905));const a={},l="Rill Developer",i={unversionedId:"extensions/rill",id:"extensions/rill",title:"Rill Developer",description:"What is Rill Developer?",source:"@site/docs/extensions/rill.md",sourceDirName:"extensions",slug:"/extensions/rill",permalink:"/alto/docs/extensions/rill",draft:!1,editUrl:"https://github.com/z3z1ma/alto/tree/main/docs/docs/extensions/rill.md",tags:[],version:"current",frontMatter:{},sidebar:"extensionsSidebar",previous:{title:"Evidence.dev",permalink:"/alto/docs/extensions/evidence"}},s={},p=[{value:"What is Rill Developer?",id:"what-is-rill-developer",level:2},{value:"Configuring Rill Developer in Alto",id:"configuring-rill-developer-in-alto",level:2},{value:"Rill Source Files &amp; Hooks (new)",id:"rill-source-files--hooks-new",level:2},{value:"Usage",id:"usage",level:2},{value:"Available Commands",id:"available-commands",level:3},{value:"<code>rill:initialize</code>",id:"rillinitialize",level:3},{value:"<code>rill:start</code>",id:"rillstart",level:3},{value:"<code>rill:sync</code>",id:"rillsync",level:3}],u={toc:p},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rill-developer"},"Rill Developer"),(0,r.kt)("h2",{id:"what-is-rill-developer"},"What is Rill Developer?"),(0,r.kt)("p",null,"Quoting from the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.rilldata.com"},"Rill Data")," website:"),(0,r.kt)("p",null,"Rill Developer makes it effortless to transform your datasets with SQL and create powerful, opinionated dashboards. Rill's principles:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"feels good to use")," \u2013 powered by Sveltekit & DuckDB = conversation-fast, not wait-ten-seconds-for-result-set fast"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"works with your local and remote datasets")," \u2013 imports and exports Parquet and CSV (s3, gcs, https, local)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},'no more data analysis "side-quests"')," \u2013 helps you build intuition about your dataset through automatic profiling"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},'no "run query" button required')," \u2013 responds to each keystroke by re-profiling the resulting dataset"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"radically simple dashboards")," \u2013 thoughtful, opinionated defaults to help you quickly derive insights from your data"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"dashboards as code")," \u2013 each step from data to dashboard has versioning, git sharing, and easy project rehydration")),(0,r.kt)("p",null,"See their for installation instructions."),(0,r.kt)("h2",{id:"configuring-rill-developer-in-alto"},"Configuring Rill Developer in Alto"),(0,r.kt)("p",null,"To enable the Rill Developer extension, you must add ",(0,r.kt)("inlineCode",{parentName:"p"},"rill")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions")," key in your ",(0,r.kt)("inlineCode",{parentName:"p"},"alto")," configuration file. Rill only has one configuration option, which is the ",(0,r.kt)("inlineCode",{parentName:"p"},"home")," key. This is the path to the Rill project. The ",(0,r.kt)("inlineCode",{parentName:"p"},"RILL_HOME")," environment variable will override this if set."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="alto.toml"',title:'"alto.toml"'},'[default]\n# Enable the evidence extension\nextensions = ["rill"]\n\n[default.utilities.rill]\n# set the home directory for rill\nhome = "./exploration"\n')),(0,r.kt)("h2",{id:"rill-source-files--hooks-new"},"Rill Source Files & Hooks (new)"),(0,r.kt)("p",null,"One part of rill that beckoned improvement via alto something I've called ",(0,r.kt)("inlineCode",{parentName:"p"},"hooks"),". Hooks are a way to, optionally, run commands on a source file before it is hydrated by rill. This is useful for things like running ",(0,r.kt)("inlineCode",{parentName:"p"},"bq extract")," or a snowflake ",(0,r.kt)("inlineCode",{parentName:"p"},"export")," statement since rill ",(0,r.kt)("em",{parentName:"p"},"can")," eagerly consume data from buckets but not from a database. Here is a typical source file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="sources/employees.yaml"',title:'"sources/employees.yaml"'},"type: gcs\nuri: gs://your-bucket/my-data/employees.parquet.gz\n")),(0,r.kt)("p",null,"The problem with this is the ",(0,r.kt)("strong",{parentName:"p"},"necessary step to update the parquet is now disconnected from the source definition"),". The update could be a ",(0,r.kt)("inlineCode",{parentName:"p"},"dbt run-operation"),", a custom python script, or even an ",(0,r.kt)("inlineCode",{parentName:"p"},"alto")," command for alto-ception."),(0,r.kt)("p",null,"So lets add a ",(0,r.kt)("inlineCode",{parentName:"p"},"hook")," to this source file to fix this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="sources/employees.yaml"',title:'"sources/employees.yaml"'},"type: gcs\nuri: gs://your-bucket/my-data/employees.parquet.gz\n_hooks:\n  - bq extract --destination_format=PARQUET --compression=GZIP --project_id=your-project-id your-dataset.employees gs://your-bucket/my-data/employees.parquet.gz\n")),(0,r.kt)("p",null,"Now when you run ",(0,r.kt)("inlineCode",{parentName:"p"},"rill:start -h employees")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"rill:sync")," alto will run the hook before the source is hydrated on rill server startup. This is a great way to keep your source definitions up to date and shareable. Please continue reading for more details on how to use hooks."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("h3",{id:"available-commands"},"Available Commands"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\ud83d\ude80 rill:initialize               Create a new, empty Rill project.\n\ud83d\ude80 rill:start                    When you run rill start, it parses your project and ingests any missing data sources into a local DuckDB database. After your project has been re-hydrated, it starts the Rill web app on http://localhost:9009\n\ud83d\ude80 rill:sync                     Run hooks for all sources containing a _hooks array.\n")),(0,r.kt)("h3",{id:"rillinitialize"},(0,r.kt)("inlineCode",{parentName:"h3"},"rill:initialize")),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"rill:initialize")," command to create a new Rill project. This will scaffold out a rill project containing a ",(0,r.kt)("inlineCode",{parentName:"p"},"rill.yaml")," and 3 folders: ",(0,r.kt)("inlineCode",{parentName:"p"},"sources"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"models"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboards"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"sources")," folder contains the data sources for your project as yaml. The ",(0,r.kt)("inlineCode",{parentName:"p"},"models")," folder contains the SQL models for your project. The ",(0,r.kt)("inlineCode",{parentName:"p"},"dashboards")," folder contains the dashboard definitions for your project as yaml."),(0,r.kt)("h3",{id:"rillstart"},(0,r.kt)("inlineCode",{parentName:"h3"},"rill:start")),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"rill:start")," command to start the Rill web app. This will start the Rill web app on http://localhost:9009. You can then navigate to http://localhost:9009 to view your Rill project. This command takes an optional array of sources to execute hooks for. This is useful if you want to jump straight into exploring data that depends on a source that has a hook. The format looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"alto rill:start -h source1 -h source2 -h source3\n")),(0,r.kt)("p",null,"Where ",(0,r.kt)("inlineCode",{parentName:"p"},"source1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"source2"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"source3")," correspond to ",(0,r.kt)("inlineCode",{parentName:"p"},"source1.yaml"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"source2.yaml"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"source3.yaml")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"sources")," folder."),(0,r.kt)("h3",{id:"rillsync"},(0,r.kt)("inlineCode",{parentName:"h3"},"rill:sync")),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"rill:sync")," command to run the hooks for all sources containing a ",(0,r.kt)("inlineCode",{parentName:"p"},"_hooks")," array. This will run the hooks for ",(0,r.kt)("strong",{parentName:"p"},"all")," sources containing a ",(0,r.kt)("inlineCode",{parentName:"p"},"_hooks")," array. This is useful if you want to run the hooks for all sources in your project."))}d.isMDXComponent=!0}}]);